{"version":3,"file":"flyer.js","sources":["..//home/peter/Workshop14/lob/client/carbide/key-error.js","..//home/peter/Workshop14/lob/client/carbide/struct.js","..//home/peter/Workshop14/lob/client/flyer/projection.js","..//home/peter/Workshop14/lob/client/flyer/flyer.js","..//home/peter/Workshop14/lob/client/avionics/presenter.js","..//home/peter/Workshop14/lob/client/avionics/display.js","..//home/peter/Workshop14/lob/client/flyer.js"],"sourcesContent":["/* jshint esnext: true */\n\nexport function KeyError(key) {\n  this.name = \"KeyError\";\n  this.message = \"key \\\"\" + key + \"\\\" not found\";\n  this.stack = (new Error()).stack;\n}\nKeyError.prototype = Object.create(Error.prototype);\nKeyError.prototype.constructor = KeyError;\n\nexport default KeyError;\n","/* jshint esnext: true */\n\nimport KeyError from \"./key-error\";\n\nexport function Struct(defaults, source){\n  \"use strict\";\n  if ( !(this instanceof Struct) ) { return new Struct(defaults, source); }\n\n  Object.assign(this, defaults);\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      if (!this.hasOwnProperty(key)) {\n        throw new KeyError(key);\n      }\n      this[key] = source[key];\n    }\n  }\n  Object.freeze(this);\n}\n\nStruct.prototype.hasKey = function (key) {\n  return Object.keys(this).indexOf(key) !== -1;\n};\n\nStruct.prototype.fetch = function (key) {\n  if (this.hasKey(key)) {\n    return this[key];\n  } else {\n    throw new KeyError(key);\n  }\n};\n\nStruct.prototype.set = function (key, value) {\n  if (this[key] === value) {\n    return this;\n  }\n  var tmp = {};\n  tmp[key] = value;\n  return this.merge(tmp);\n};\n\nStruct.prototype.update = function (key, operation) {\n  return this.set(key, operation(this[key]));\n};\n\nStruct.prototype.merge = function (other) {\n  return Struct(this, other);\n};\n\nexport default Struct;\n","/* jshint esnext: true */\n\nfunction readingsDuration(readings){\n  if (!readings[0]) { return 0; }\n  var last = readings.length;\n  var t0 = readings[0].timestamp;\n  var t1 = readings[last - 1].timestamp;\n  // DEBT Magic number that make sense when sample rate is every 250ms\n  return (t1 + 250 - t0) / 1000;\n}\nfunction altitudeForFreefallDuration(duration){\n  // Altitude Calculation\n\n  // SUVAT\n  // s = vt - 0.5 * a * t^2\n  // input\n  // s = s <- desired result\n  // u = ? <- not needed\n  // v = 0 <- stationary at top\n  // a = - 9.81 <- local g\n  // t = flightTime/2 time to top of arc\n\n  // s = 9.81 * 1/8 t^2\n  var t = duration;\n  return 9.81/8 * t * t;\n}\n\nfunction round(number){\n  return parseFloat(number.toFixed(2));\n}\n\nfunction Presenter(raw){\n\n  Object.defineProperty(this, \"maxFlightTime\", {\n    get: function(){\n      var flights = raw.flightHistory.concat([raw.currentFlight]);\n      var flightDurations = flights.map(readingsDuration);\n      var time =  Math.max.apply(null, flightDurations);\n      return time;\n    }\n  });\n\n  Object.defineProperty(this, \"maxAltitude\", {\n    get: function(){\n      var flightDurations = raw.flightHistory.map(readingsDuration);\n      var max = Math.max.apply(null, [0].concat(flightDurations));\n      return round(altitudeForFreefallDuration(max));\n    }\n  });\n\n  Object.defineProperty(this, \"currentReading\", {\n    get: function(){\n      return raw.currentReading;\n    }\n  });\n\n  Object.defineProperty(this, \"hasThrow\", {\n    get: function(){\n      return this.maxAltitude !== 0;\n    }\n  });\n\n  Object.defineProperty(this, \"uplinkStatus\", {\n    get: function(){\n      return raw.uplinkStatus;\n    }\n  });\n  Object.defineProperty(this, \"channelName\", {\n    get: function(){\n      return raw.channelName;\n    }\n  });\n}\n\nexport function present(app){\n  return new Presenter(app);\n}\nexport default present;\n","/* jshint esnext: true */\n\n// import * as State from \"./state\";\nimport Projection from \"./projection\";\n\nimport Struct from \"../carbide/struct\";\n\nvar FLYER_STATE_DEFAULTS = {\n  uplinkStatus: \"UNKNOWN\",\n  latestReading: null, // DEBT best place a null object here\n  currentFlight: [],\n  flightHistory: [],\n};\n// DEBT not quite sure why this can't just be named state;\nfunction FlyerState(raw){\n  if ( !(this instanceof FlyerState) ) { return new FlyerState(raw); }\n\n  // DEBT with return statement is not an instance of FlyerState.\n  // without return statement does not work at all.\n  return Struct.call(this, FLYER_STATE_DEFAULTS, raw);\n}\n\nFlyerState.prototype = Object.create(Struct.prototype);\nFlyerState.prototype.constructor = FlyerState;\n\nvar INVALID_STATE_MESSAGE = \"Flyer did not recieve valid initial state\";\n\nexport default function Flyer(state){\n  if ( !(this instanceof Flyer) ) { return new Flyer(state); }\n  try {\n    state = FlyerState(state || {});\n  } catch (e) {\n    throw new TypeError(INVALID_STATE_MESSAGE);\n  }\n\n  var flyer = this;\n  flyer.state = state;\n\n  flyer.uplinkAvailable = function(){\n    // Set state action can cause projection to exhibit new state\n    flyer.state = flyer.state.set(\"uplinkStatus\", \"AVAILABLE\");\n    // call log change. test listeners that the state has changed.\n    // stateChange({state: state, action: \"Uplink Available\", log: debug});\n    logInfo(\"[Uplink Available]\");\n    showcase(flyer.state);\n  };\n  this.startTransmitting = function(){\n    // TODO test and handle case when uplink not available.\n    flyer.state = flyer.state.set(\"uplinkStatus\", \"TRANSMITTING\");\n    showcase(flyer.state);\n  };\n  flyer.newReading = function(reading){\n    var state = flyer.state.set(\"latestReading\", reading);\n    var currentFlight = state.currentFlight;\n    var flightHistory = state.flightHistory;\n    if (reading.magnitude < 4) {\n      currentFlight =  currentFlight.concat(reading);\n    } else if(currentFlight[0]) {\n      // DEBT concat splits array so we double wrap the flight\n      flightHistory = flightHistory.concat([currentFlight]);\n      currentFlight = [];\n    }\n    state = state.set(\"currentFlight\", currentFlight);\n    state = state.set(\"flightHistory\", flightHistory);\n    flyer.state = state;\n    transmitReading(reading);\n    // logInfo(\"[New reading]\", reading); DONT log this\n    showcase(flyer.state);\n  };\n  flyer.resetReadings = function(){\n    flyer.state = flyer.state.merge({\n      latestReading: null,\n      currentFlight: [],\n      flightHistory: []\n    });\n    // transmit\n    logInfo(\"[Reset readings]\");\n    showcase(flyer.state);\n  };\n\n  this.uplinkFailed = function(){\n    flyer.state = flyer.state.set(\"uplinkStatus\", \"FAILED\");\n    showcase(flyer.state);\n    logInfo(\"[Uplink Failed]\");\n  };\n\n  // DEBT what to do before other values are set\n  function transmitReading(reading){\n    if (flyer.state.uplinkStatus === \"TRANSMITTING\") {\n      flyer.uplink.transmitReading(reading);\n    }\n  }\n  function showcase(state){\n    flyer.view.render(Projection(state));\n  }\n  function logInfo() {\n    flyer.logger.info.apply(flyer.logger, arguments);\n  }\n}\nFlyer.State = FlyerState;\n","/* jshint esnext: true */\n\nexport function format(i){\n  var fixed = i.toFixed(2);\n  var signed = i < 0 ? fixed : \"+\" + fixed;\n  var short = \"+00.00\".length - signed.length;\n  var padded = (short == 1) ? signed.replace(/[\\+\\-]/, function(sign){ return sign + \"0\"; }) : signed;\n  return padded;\n}\n\nfunction Presenter(raw){\n\n  Object.defineProperty(this, \"maxFlightTime\", {\n    get: function(){\n      return raw.maxFlightTime + \" s\";\n    }\n  });\n\n  Object.defineProperty(this, \"maxAltitude\", {\n    get: function(){\n      return raw.maxAltitude + \" m\";\n    }\n  });\n\n  Object.defineProperty(this, \"currentReadout\", {\n    get: function(){\n      // DEBT replace with reading toString method\n      if (!raw.currentReading) {\n        return \"Waiting.\";\n      }\n      var acceleration = raw.currentReading.acceleration;\n      var x = acceleration.x;\n      var y = acceleration.y;\n      var z = acceleration.z;\n      return \"[\" + [format(x), format(y), format(z)].join(\", \") + \"]\";\n    }\n  });\n\n  Object.defineProperty(this, \"instruction\", {\n    get: function(){\n      if (!this.hasThrow) {\n        return \"Lob phone to get started\";\n      }\n      return \"OK! can you lob any higher\";\n    }\n  });\n\n  Object.defineProperty(this, \"uplinkStatus\", {\n    get: function(){\n      return raw.uplinkStatus.toLowerCase();\n    }\n  });\n  Object.defineProperty(this, \"channelName\", {\n    get: function(){\n      return raw.channelName;\n    }\n  });\n}\n\nexport function present(app){\n  return new Presenter(app);\n}\nexport default present;\n","/* jshint esnext: true */\n\nfunction Display($root){\n  var $maxFlightTime = $root.querySelector(\"[data-hook~=flight-time]\");\n  var $maxAltitude = $root.querySelector(\"[data-hook~=max-altitude]\");\n  var $currentReadout = $root.querySelector(\"[data-hook~=current-reading]\");\n  var $instruction = $root.querySelector(\"[data-display~=instruction]\");\n  var $uplink = $root.querySelector(\"[data-display~=uplink]\");\n  var $channel = $root.querySelector(\"[data-display~=channel]\");\n\n  return Object.create({}, {\n    maxFlightTime: {\n      set: function(maxFlightTime){\n        $maxFlightTime.innerHTML = maxFlightTime;\n      },\n      enumerable: true\n    },\n    maxAltitude: {\n      set: function(maxAltitude){\n        $maxAltitude.innerHTML = maxAltitude;\n      },\n      enumerable: true\n    },\n    currentReadout: {\n      set: function(currentReadout){\n        $currentReadout.innerHTML = currentReadout;\n      },\n      enumerable: true\n    },\n    instruction: {\n      set: function(instruction){\n        $instruction.innerHTML = instruction;\n      },\n      enumerable: true\n    },\n    channelName: {\n      set: function(channel){\n        var content = \"Watch on channel '\" + channel + \"'\";\n        $channel.innerHTML = content;\n      },\n      enumerable: true\n    },\n    uplinkStatus: {\n      set: function(status){\n        console.log(\"setting status\");\n        $uplink.classList.remove(\"unknown\");\n        $uplink.classList.remove(\"available\");\n        $uplink.classList.remove(\"transmitting\");\n        $uplink.classList.remove(\"failed\");\n        $uplink.classList.add(status);\n      },\n      enumerable: true\n    }\n  });\n\n}\n\nexport function create($root){ Display($root); }\n\nexport default Display;\n","/* jshint esnext: true */\nimport Flyer from \"./flyer/flyer\";\nimport Presenter from \"./avionics/presenter\";\nimport Display from \"./avionics/display\";\n\nvar flyer = new Flyer();\nflyer.logger = window.console;\nflyer.view = {\n  render: function(projection){\n    var presentation = Presenter(projection);\n    var $avionics = document.querySelector(\"[data-interface~=avionics]\");\n    var display = new Display($avionics);\n    for (var attribute in display) {\n      if (display.hasOwnProperty(attribute)) {\n        display[attribute] = presentation[attribute];\n      }\n    }\n  }\n};\n\nvar DEVICEMOTION = \"devicemotion\";\nfunction AccelerometerController(global, flyer){\n  global.addEventListener(DEVICEMOTION, function(deviceMotionEvent){\n    console.debug(\"AccelerometerController\", deviceMotionEvent);\n    flyer.newReading({\n      acceleration: deviceMotionEvent.accelerationIncludingGravity,\n      timestamp: Date.now()\n    });\n  });\n}\n\nvar accelerometerController = new AccelerometerController(window, flyer);\nexport default flyer;\n"],"names":["Presenter","present","Projection"],"mappings":"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"}