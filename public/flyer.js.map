{"version":3,"file":"flyer.js","sources":["..//home/peter/Workshop14/lob/client/polyfill.js","..//home/peter/Workshop14/lob/client/flyer/state.js","..//home/peter/Workshop14/lob/client/flyer/projection.js","..//home/peter/Workshop14/lob/client/flyer/flyer.js","..//home/peter/Workshop14/lob/client/avionics/presenter.js","..//home/peter/Workshop14/lob/client/avionics/display.js","..//home/peter/Workshop14/lob/client/flyer.js"],"sourcesContent":["if (!Object.assign) {\n  Object.defineProperty(Object, 'assign', {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function(target) {\n      'use strict';\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert first argument to object');\n      }\n\n      var to = Object(target);\n      for (var i = 1; i < arguments.length; i++) {\n        var nextSource = arguments[i];\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n        nextSource = Object(nextSource);\n\n        var keysArray = Object.keys(nextSource);\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n          var nextKey = keysArray[nextIndex];\n          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n          if (desc !== undefined && desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      return to;\n    }\n  });\n}\n","/* jshint esnext: true */\n// TODO handle polyfill\nimport \"../polyfill\";\n\nfunction lens(key){\n  return function(func){\n    return function(obj){\n      obj = obj || key;\n      var update = {};\n      update[key] = func(obj[key]);\n      return Object.assign({}, obj, update);\n    };\n  };\n}\n\nvar compose = function () {\n  var fns = arguments;\n\n  return function (result) {\n    for (var i = fns.length - 1; i > -1; i--) {\n      result = fns[i].call(this, result);\n    }\n\n    return result;\n  };\n};\n\nvar FREEFALL_LIMIT = 4;\n\nvar Reading = {\n  freefall: function(reading){\n    var a = reading.acceleration;\n    var magnitude = Math.sqrt(a.x * a.x + a.y * a.y + a.z * a.z);\n    return magnitude < FREEFALL_LIMIT;\n  }\n};\n\nvar EMPTY_READINGS = Object.freeze({\n  currentFlight: [],\n  current: null,\n  flightHistory: []\n});\n\nvar readings = {\n  reset: function(_readings){\n    return EMPTY_READINGS;\n  },\n  // new: function(readings, reading){\n  //   return Object.assign({}, readings, {current: reading});\n  // }\n};\n\nexport var resetReadings = lens(\"readings\")(readings.reset);\n\nexport function newReading(state, current){\n  state = state || {};\n  var readings = state.readings || EMPTY_READINGS;\n  var currentFlight = readings.currentFlight;\n  var flightHistory = readings.flightHistory;\n  if (Reading.freefall(current)) {\n    currentFlight = currentFlight.concat(current);\n  } else if(currentFlight[0]) {\n    flightHistory = flightHistory.concat([currentFlight]);\n    currentFlight = [];\n  }\n  readings = {current: current, currentFlight: currentFlight, flightHistory: flightHistory};\n  return Object.assign({}, state, {readings: readings});\n}\n\nexport function badReading(state){\n  var MESSAGE = \"Could not read the data from this device. Please try again on a mobile with working accelerometer.\";\n  return showAlert(state, MESSAGE);\n}\nexport function showAlert(state, message){\n  state = state || {};\n  var notices = state.notices || [];\n  notices = notices.concat(message);\n  return Object.assign({}, state, {notices: notices});\n}\n\nexport function closeNotices(state){\n  state = state || {};\n  var notices = [];\n  return Object.assign({}, state, {notices: notices});\n}\n\nexport function uplinkAvailable(state){\n  state = state || {};\n  var uplink = state.uplink || {};\n  return Object.assign({}, state, {uplink: {status: \"AVAILABLE\"}});\n}\nexport function startTransmitting(state){\n  state = state || {};\n  var uplink = state.uplink || {};\n  return Object.assign({}, state, {uplink: {status: \"TRANSMITTING\"}});\n}\nexport function uplinkFailed(state){\n  state = state || {};\n  var uplink = state.uplink || {};\n  return Object.assign({}, state, {uplink: {status: \"FAILED\"}});\n}\n","/* jshint esnext: true */\n\nfunction readingsDuration(readings){\n  if (!readings[0]) { return 0; }\n  var last = readings.length;\n  var t0 = readings[0].timestamp;\n  var t1 = readings[last - 1].timestamp;\n  // DEBT Magic number that make sense when sample rate is every 250ms\n  return (t1 + 250 - t0) / 1000;\n}\nfunction altitudeForFreefallDuration(duration){\n  // Altitude Calculation\n\n  // SUVAT\n  // s = vt - 0.5 * a * t^2\n  // input\n  // s = s <- desired result\n  // u = ? <- not needed\n  // v = 0 <- stationary at top\n  // a = - 9.81 <- local g\n  // t = flightTime/2 time to top of arc\n\n  // s = 9.81 * 1/8 t^2\n  var t = duration;\n  return 9.81/8 * t * t;\n}\n\nfunction round(number){\n  return parseFloat(number.toFixed(2));\n}\n\nfunction Presenter(raw){\n\n  Object.defineProperty(this, \"maxFlightTime\", {\n    get: function(){\n      var flights = raw.flightHistory.concat([raw.currentFlight]);\n      var flightDurations = flights.map(readingsDuration);\n      var time =  Math.max.apply(null, flightDurations);\n      return time;\n    }\n  });\n\n  Object.defineProperty(this, \"maxAltitude\", {\n    get: function(){\n      var flightDurations = raw.flightHistory.map(readingsDuration);\n      var max = Math.max.apply(null, [0].concat(flightDurations));\n      return round(altitudeForFreefallDuration(max));\n    }\n  });\n\n  Object.defineProperty(this, \"currentReading\", {\n    get: function(){\n      return raw.currentReading;\n    }\n  });\n\n  Object.defineProperty(this, \"hasThrow\", {\n    get: function(){\n      return this.maxAltitude !== 0;\n    }\n  });\n\n  Object.defineProperty(this, \"uplinkStatus\", {\n    get: function(){\n      return raw.uplinkStatus;\n    }\n  });\n  Object.defineProperty(this, \"channelName\", {\n    get: function(){\n      return raw.channelName;\n    }\n  });\n}\n\nexport function present(app){\n  return new Presenter(app);\n}\nexport default present;\n","/* jshint esnext: true */\n\nimport * as State from \"./state\";\nimport Projection from \"./projection\";\n\nexport default function Flyer(world){\n  if ( !(this instanceof Flyer) ) { return new Flyer(world); }\n  var flyer = this;\n\n  flyer.uplink = {\n    transmitReading: function(reading){\n    }\n  };\n  flyer.view = {\n    render: function(){\n      console.log(\"old view\");\n    }\n  };\n\n  var state;\n  this.state = {\n    uplinkStatus: \"UNKNOWN\"\n  };\n  function showcase(state){\n    flyer.view.render(Projection(state));\n  }\n  function transmitReading(reading){\n    flyer.uplink.transmitReading(reading);\n  }\n  function logInfo() {\n    flyer.logger.info.apply(flyer.logger, arguments);\n  }\n\n  this.resetReadings = function(){\n    state = State.resetReadings(state);\n    logInfo(\"[Reset readings]\");\n    showcase(flyer.state);\n  };\n  this.newReading = function(reading){\n    state = State.newReading(state, reading);\n    transmitReading(reading);\n    logInfo(\"[New reading]\", reading);\n    showcase(flyer.state);\n  };\n  this.uplinkAvailable = function(){\n    flyer.state.uplinkStatus = \"AVAILABLE\";\n    showcase(flyer.state);\n  };\n  this.uplinkFailed = function(){\n    flyer.state.uplinkStatus = \"FAILED\";\n    showcase(flyer.state);\n  };\n  this.startTransmitting = function(){\n    // try {\n    //   flyer.state.update(\"uplinkStatus\", Uplink.startTransmitting)\n    // } catch (e) {\n    //   view.alert(uplink unavailable)\n    // }\n    flyer.state.uplinkStatus = \"TRANSMITTING\";\n    showcase(flyer.state);\n  };\n\n  // DEBT these properties belong on a projection\n  Object.defineProperty(this, \"currentReading\", {\n    get: function(){\n      var readings = state.readings || {};\n      return readings.current;\n    }\n  });\n  Object.defineProperty(this, \"currentFlight\", {\n    get: function(){\n      var readings = state.readings || {};\n      return readings.currentFlight || [];\n    }\n  });\n  Object.defineProperty(this, \"flightHistory\", {\n    get: function(){\n      var readings = state.readings || {};\n      return readings.flightHistory || [];\n    }\n  });\n}\n","/* jshint esnext: true */\n\nexport function format(i){\n  var fixed = i.toFixed(2);\n  var signed = i < 0 ? fixed : \"+\" + fixed;\n  var short = \"+00.00\".length - signed.length;\n  var padded = (short == 1) ? signed.replace(/[\\+\\-]/, function(sign){ return sign + \"0\"; }) : signed;\n  return padded;\n}\n\nfunction Presenter(raw){\n\n  Object.defineProperty(this, \"maxFlightTime\", {\n    get: function(){\n      return raw.maxFlightTime + \" s\";\n    }\n  });\n\n  Object.defineProperty(this, \"maxAltitude\", {\n    get: function(){\n      return raw.maxAltitude + \" m\";\n    }\n  });\n\n  Object.defineProperty(this, \"currentReadout\", {\n    get: function(){\n      // DEBT replace with reading toString method\n      if (!raw.currentReading) {\n        return \"Waiting.\";\n      }\n      var acceleration = raw.currentReading.acceleration;\n      var x = acceleration.x;\n      var y = acceleration.y;\n      var z = acceleration.z;\n      return \"[\" + [format(x), format(y), format(z)].join(\", \") + \"]\";\n    }\n  });\n\n  Object.defineProperty(this, \"instruction\", {\n    get: function(){\n      if (!this.hasThrow) {\n        return \"Lob phone to get started\";\n      }\n      return \"OK! can you lob any higher\";\n    }\n  });\n\n  Object.defineProperty(this, \"uplinkStatus\", {\n    get: function(){\n      return raw.uplinkStatus.toLowerCase();\n    }\n  });\n  Object.defineProperty(this, \"channelName\", {\n    get: function(){\n      return raw.channelName;\n    }\n  });\n}\n\nexport function present(app){\n  return new Presenter(app);\n}\nexport default present;\n","/* jshint esnext: true */\n\nfunction Display($root){\n  var $maxFlightTime = $root.querySelector(\"[data-hook~=flight-time]\");\n  var $maxAltitude = $root.querySelector(\"[data-hook~=max-altitude]\");\n  var $currentReadout = $root.querySelector(\"[data-hook~=current-reading]\");\n  var $instruction = $root.querySelector(\"[data-display~=instruction]\");\n  var $uplink = $root.querySelector(\"[data-display~=uplink]\");\n  var $channel = $root.querySelector(\"[data-display~=channel]\");\n\n  return Object.create({}, {\n    maxFlightTime: {\n      set: function(maxFlightTime){\n        $maxFlightTime.innerHTML = maxFlightTime;\n      },\n      enumerable: true\n    },\n    maxAltitude: {\n      set: function(maxAltitude){\n        $maxAltitude.innerHTML = maxAltitude;\n      },\n      enumerable: true\n    },\n    currentReadout: {\n      set: function(currentReadout){\n        $currentReadout.innerHTML = currentReadout;\n      },\n      enumerable: true\n    },\n    instruction: {\n      set: function(instruction){\n        $instruction.innerHTML = instruction;\n      },\n      enumerable: true\n    },\n    channelName: {\n      set: function(channel){\n        var content = \"Watch on channel '\" + channel + \"'\";\n        $channel.innerHTML = content;\n      },\n      enumerable: true\n    },\n    uplinkStatus: {\n      set: function(status){\n        console.log(\"setting status\");\n        $uplink.classList.remove(\"unknown\");\n        $uplink.classList.remove(\"available\");\n        $uplink.classList.remove(\"transmitting\");\n        $uplink.classList.remove(\"failed\");\n        $uplink.classList.add(status);\n      },\n      enumerable: true\n    }\n  });\n\n}\n\nexport function create($root){ Display($root); }\n\nexport default Display;\n","/* jshint esnext: true */\nimport Flyer from \"./flyer/flyer\";\nimport Presenter from \"./avionics/presenter\";\nimport Display from \"./avionics/display\";\n\nvar flyer = new Flyer();\nflyer.logger = window.console;\nflyer.view = {\n  render: function(projection){\n    var presentation = Presenter(projection);\n    console.log(\"ola\", presentation);\n    var $avionics = document.querySelector(\"[data-interface~=avionics]\");\n    var display = new Display($avionics);\n    console.log($avionics);\n    for (var attribute in display) {\n        console.log(presentation[attribute])\n      if (display.hasOwnProperty(attribute)) {\n        // display[attribute] = presenter[attribute];\n      }\n    }\n  }\n};\n\nvar DEVICEMOTION = \"devicemotion\";\nfunction AccelerometerController(global, flyer){\n  global.addEventListener(DEVICEMOTION, function(deviceMotionEvent){\n    console.debug(\"AccelerometerController\", deviceMotionEvent);\n    flyer.newReading({\n      acceleration: deviceMotionEvent.accelerationIncludingGravity,\n      timestamp: Date.now()\n    });\n  });\n}\n\nvar accelerometerController = new AccelerometerController(window, flyer);\n"],"names":["Presenter","present","Projection","State.resetReadings","State.newReading"],"mappings":";;EAAA,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;IAClB,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE;MACtC,UAAU,EAAE,KAAK;MACjB,YAAY,EAAE,IAAI;MAClB,QAAQ,EAAE,IAAI;MACd,KAAK,EAAE,SAAS,MAAM,EAAE;QACtB,YAAY;QACZ,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;UAC3C,MAAM,IAAI,SAAS,CAAC,yCAAyC,CAAC;;;QAGhE,IAAI,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC;QACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UACzC,IAAI,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC;UAC7B,IAAI,UAAU,KAAK,SAAS,IAAI,UAAU,KAAK,IAAI,EAAE;YACnD;;UAEF,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;;UAE/B,IAAI,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;UACvC,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,SAAS,GAAG,GAAG,EAAE,SAAS,EAAE,EAAE;YAC5E,IAAI,OAAO,GAAG,SAAS,CAAC,SAAS,CAAC;YAClC,IAAI,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,UAAU,EAAE,OAAO,CAAC;YAC/D,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE;cACzC,EAAE,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC,OAAO,CAAC;;;;QAIvC,OAAO,EAAE;;KAEZ,CAAC;;;EC1BJ,SAAS,IAAI,CAAC,GAAG,CAAC;IAChB,OAAO,SAAS,IAAI,CAAC;MACnB,OAAO,SAAS,GAAG,CAAC;QAClB,GAAG,GAAG,GAAG,IAAI,GAAG;QAChB,IAAI,MAAM,GAAG,EAAE;QACf,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC5B,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,MAAM,CAAC;OACtC;KACF;;;EAeH,IAAI,cAAc,GAAG,CAAC;;EAEtB,IAAI,OAAO,GAAG;IACZ,QAAQ,EAAE,SAAS,OAAO,CAAC;MACzB,IAAI,CAAC,GAAG,OAAO,CAAC,YAAY;MAC5B,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC5D,OAAO,SAAS,GAAG,cAAc;;GAEpC;;EAED,IAAI,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC;IACjC,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,IAAI;IACb,aAAa,EAAE;GAChB,CAAC;;EAEF,IAAI,QAAQ,GAAG;IACb,KAAK,EAAE,SAAS,SAAS,CAAC;MACxB,OAAO,cAAc;KACtB;;;;GAIF;;EAEM,IAAI,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC;;EAEpD,SAAS,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC;IACxC,KAAK,GAAG,KAAK,IAAI,EAAE;IACnB,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,cAAc;IAC/C,IAAI,aAAa,GAAG,QAAQ,CAAC,aAAa;IAC1C,IAAI,aAAa,GAAG,QAAQ,CAAC,aAAa;IAC1C,IAAI,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;MAC7B,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC;KAC9C,MAAM,GAAG,aAAa,CAAC,CAAC,CAAC,EAAE;MAC1B,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,CAAC;MACrD,aAAa,GAAG,EAAE;;IAEpB,QAAQ,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,CAAC;IACzF,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;;;EClEvD;;EAEA,SAAS,gBAAgB,CAAC,QAAQ,CAAC;IACjC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;IAC7B,IAAI,IAAI,GAAG,QAAQ,CAAC,MAAM;IAC1B,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS;IAC9B,IAAI,EAAE,GAAG,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,SAAS;;IAErC,OAAO,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;;EAE/B,SAAS,2BAA2B,CAAC,QAAQ,CAAC;;;;;;;;;;;;;IAa5C,IAAI,CAAC,GAAG,QAAQ;IAChB,OAAO,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;;;EAGvB,SAAS,KAAK,CAAC,MAAM,CAAC;IACpB,OAAO,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;;EAGtC,SAAS,WAAS,CAAC,GAAG,CAAC;;IAErB,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,eAAe,EAAE;MAC3C,GAAG,EAAE,UAAU;QACb,IAAI,OAAO,GAAG,GAAG,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC3D,IAAI,eAAe,GAAG,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC;QACnD,IAAI,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,eAAe,CAAC;QACjD,OAAO,IAAI;;KAEd,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,aAAa,EAAE;MACzC,GAAG,EAAE,UAAU;QACb,IAAI,eAAe,GAAG,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAC;QAC7D,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAC3D,OAAO,KAAK,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAC;;KAEjD,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,gBAAgB,EAAE;MAC5C,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,cAAc;;KAE5B,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE;MACtC,GAAG,EAAE,UAAU;QACb,OAAO,IAAI,CAAC,WAAW,KAAK,CAAC;;KAEhC,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MAC1C,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,YAAY;;KAE1B,CAAC;IACF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,aAAa,EAAE;MACzC,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,WAAW;;KAEzB,CAAC;;;EAGG,SAAS,SAAO,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,WAAS,CAAC,GAAG,CAAC;;;ECtEZ,SAAS,KAAK,CAAC,KAAK,CAAC;IAClC,KAAK,CAAC,CAAC,IAAI,YAAY,KAAK,CAAC,GAAG,EAAE,OAAO,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC;IAC1D,IAAI,KAAK,GAAG,IAAI;;IAEhB,KAAK,CAAC,MAAM,GAAG;MACb,eAAe,EAAE,SAAS,OAAO,CAAC;;KAEnC;IACD,KAAK,CAAC,IAAI,GAAG;MACX,MAAM,EAAE,UAAU;QAChB,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;;KAE1B;;IAED,IAAI,KAAK;IACT,IAAI,CAAC,KAAK,GAAG;MACX,YAAY,EAAE;KACf;IACD,SAAS,QAAQ,CAAC,KAAK,CAAC;MACtB,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,SAAU,CAAC,KAAK,CAAC,CAAC;;IAEtC,SAAS,eAAe,CAAC,OAAO,CAAC;MAC/B,KAAK,CAAC,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC;;IAEvC,SAAS,OAAO,GAAG;MACjB,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC;;;IAGlD,IAAI,CAAC,aAAa,GAAG,UAAU;MAC7B,KAAK,GAAG,aAAmB,CAAC,KAAK,CAAC;MAClC,OAAO,CAAC,kBAAkB,CAAC;MAC3B,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;KACtB;IACD,IAAI,CAAC,UAAU,GAAG,SAAS,OAAO,CAAC;MACjC,KAAK,GAAG,UAAgB,CAAC,KAAK,EAAE,OAAO,CAAC;MACxC,eAAe,CAAC,OAAO,CAAC;MACxB,OAAO,CAAC,eAAe,EAAE,OAAO,CAAC;MACjC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;KACtB;IACD,IAAI,CAAC,eAAe,GAAG,UAAU;MAC/B,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,WAAW;MACtC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;KACtB;IACD,IAAI,CAAC,YAAY,GAAG,UAAU;MAC5B,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,QAAQ;MACnC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;KACtB;IACD,IAAI,CAAC,iBAAiB,GAAG,UAAU;;;;;;MAMjC,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,cAAc;MACzC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;KACtB;;;IAGD,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,gBAAgB,EAAE;MAC5C,GAAG,EAAE,UAAU;QACb,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,EAAE;QACnC,OAAO,QAAQ,CAAC,OAAO;;KAE1B,CAAC;IACF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,eAAe,EAAE;MAC3C,GAAG,EAAE,UAAU;QACb,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,EAAE;QACnC,OAAO,QAAQ,CAAC,aAAa,IAAI,EAAE;;KAEtC,CAAC;IACF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,eAAe,EAAE;MAC3C,GAAG,EAAE,UAAU;QACb,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,EAAE;QACnC,OAAO,QAAQ,CAAC,aAAa,IAAI,EAAE;;KAEtC,CAAC;;;EChFJ;;EAEO,SAAS,MAAM,CAAC,CAAC,CAAC;IACvB,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IACxB,IAAI,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,GAAG,GAAG,KAAK;IACxC,IAAI,KAAK,GAAG,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM;IAC3C,IAAI,MAAM,GAAG,CAAC,KAAK,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,IAAI,CAAC,EAAE,OAAO,IAAI,GAAG,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM;IACnG,OAAO,MAAM;;;EAGf,SAAS,SAAS,CAAC,GAAG,CAAC;;IAErB,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,eAAe,EAAE;MAC3C,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,aAAa,GAAG,IAAI;;KAElC,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,aAAa,EAAE;MACzC,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,WAAW,GAAG,IAAI;;KAEhC,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,gBAAgB,EAAE;MAC5C,GAAG,EAAE,UAAU;;QAEb,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE;UACvB,OAAO,UAAU;;QAEnB,IAAI,YAAY,GAAG,GAAG,CAAC,cAAc,CAAC,YAAY;QAClD,IAAI,CAAC,GAAG,YAAY,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,YAAY,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,YAAY,CAAC,CAAC;QACtB,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG;;KAElE,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,aAAa,EAAE;MACzC,GAAG,EAAE,UAAU;QACb,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;UAClB,OAAO,0BAA0B;;QAEnC,OAAO,4BAA4B;;KAEtC,CAAC;;IAEF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MAC1C,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,YAAY,CAAC,WAAW,EAAE;;KAExC,CAAC;IACF,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,aAAa,EAAE;MACzC,GAAG,EAAE,UAAU;QACb,OAAO,GAAG,CAAC,WAAW;;KAEzB,CAAC;;;EAGG,SAAS,OAAO,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,SAAS,CAAC,GAAG,CAAC;;;EC5D3B;;EAEA,SAAS,OAAO,CAAC,KAAK,CAAC;IACrB,IAAI,cAAc,GAAG,KAAK,CAAC,aAAa,CAAC,0BAA0B,CAAC;IACpE,IAAI,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,2BAA2B,CAAC;IACnE,IAAI,eAAe,GAAG,KAAK,CAAC,aAAa,CAAC,8BAA8B,CAAC;IACzE,IAAI,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,6BAA6B,CAAC;IACrE,IAAI,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,wBAAwB,CAAC;IAC3D,IAAI,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC,yBAAyB,CAAC;;IAE7D,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;MACvB,aAAa,EAAE;QACb,GAAG,EAAE,SAAS,aAAa,CAAC;UAC1B,cAAc,CAAC,SAAS,GAAG,aAAa;SACzC;QACD,UAAU,EAAE;OACb;MACD,WAAW,EAAE;QACX,GAAG,EAAE,SAAS,WAAW,CAAC;UACxB,YAAY,CAAC,SAAS,GAAG,WAAW;SACrC;QACD,UAAU,EAAE;OACb;MACD,cAAc,EAAE;QACd,GAAG,EAAE,SAAS,cAAc,CAAC;UAC3B,eAAe,CAAC,SAAS,GAAG,cAAc;SAC3C;QACD,UAAU,EAAE;OACb;MACD,WAAW,EAAE;QACX,GAAG,EAAE,SAAS,WAAW,CAAC;UACxB,YAAY,CAAC,SAAS,GAAG,WAAW;SACrC;QACD,UAAU,EAAE;OACb;MACD,WAAW,EAAE;QACX,GAAG,EAAE,SAAS,OAAO,CAAC;UACpB,IAAI,OAAO,GAAG,oBAAoB,GAAG,OAAO,GAAG,GAAG;UAClD,QAAQ,CAAC,SAAS,GAAG,OAAO;SAC7B;QACD,UAAU,EAAE;OACb;MACD,YAAY,EAAE;QACZ,GAAG,EAAE,SAAS,MAAM,CAAC;UACnB,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC;UAC7B,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC;UACnC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC;UACrC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC;UACxC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;UAClC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC;SAC9B;QACD,UAAU,EAAE;;KAEf,CAAC;;;;EChDJ,IAAI,KAAK,GAAG,IAAI,KAAK,EAAE;EACvB,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO;EAC7B,KAAK,CAAC,IAAI,GAAG;IACX,MAAM,EAAE,SAAS,UAAU,CAAC;MAC1B,IAAI,YAAY,GAAG,OAAS,CAAC,UAAU,CAAC;MACxC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,YAAY,CAAC;MAChC,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,4BAA4B,CAAC;MACpE,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,SAAS,CAAC;MACpC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;MACtB,KAAK,IAAI,SAAS,IAAI,OAAO,EAAE;UAC3B,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC;QACrC,IAAI,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;;;;;GAK5C;;EAED,IAAI,YAAY,GAAG,cAAc;EACjC,SAAS,uBAAuB,CAAC,MAAM,EAAE,KAAK,CAAC;IAC7C,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,SAAS,iBAAiB,CAAC;MAC/D,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,iBAAiB,CAAC;MAC3D,KAAK,CAAC,UAAU,CAAC;QACf,YAAY,EAAE,iBAAiB,CAAC,4BAA4B;QAC5D,SAAS,EAAE,IAAI,CAAC,GAAG;OACpB,CAAC;KACH,CAAC;;;EAGJ,IAAI,uBAAuB,GAAG,IAAI,uBAAuB,CAAC,MAAM,EAAE,KAAK,CAAC;;"}