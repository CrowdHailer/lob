{"version":3,"file":"lob.js","sources":["..//home/peter/Workshop14/lob/assets/scripts/action-dispatcher.ts","..//home/peter/Workshop14/lob/assets/scripts/utils.ts","..//home/peter/Workshop14/lob/assets/scripts/readings.ts","..//home/peter/Workshop14/lob/assets/scripts/data-logger.ts","..//home/peter/Workshop14/lob/assets/scripts/dom.ts","..//home/peter/Workshop14/lob/assets/scripts/gator.js","..//home/peter/Workshop14/lob/assets/scripts/boot.ts"],"sourcesContent":["// TODO test\nclass ActionDispatcher<Action> {\n  listeners = [];\n  addListener(listener: (action?: Action) => void){\n    this.listeners = this.listeners.concat(listener);\n  }\n  dispatch(action?: Action){\n    if (this.listeners.length == 0) {\n      console.warn(\"no listeners\");\n    } else {\n      this.listeners.forEach(function(listener){ listener(action); });\n    }\n  }\n}\n\nexport default ActionDispatcher\n","export function streak(predicate, collection) {\n  var current_streak = [];\n  var output = [];\n  collection.forEach(function (item) {\n    if (predicate(item)) {\n      current_streak.push(item);\n    } else {\n      if (current_streak.length !== 0) {\n        output.push(current_streak);\n      }\n      current_streak = [];\n    }\n  });\n  if (current_streak.length !== 0) {\n    output.push(current_streak);\n  }\n  return output;\n}\n\n// TODO currently untested\nexport function throttle(fn, threshhold, scope) {\n  threshhold = threshhold || 250;\n  var last,\n  deferTimer;\n  return function () {\n    var context = scope || this;\n    var now = Date.now(), args = arguments;\n\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer);\n      deferTimer = setTimeout(function () {\n        last = now;\n        fn.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n}\n\n// TODO currently untested\nexport function round (precision: number) {\n  return function (value: number) {\n    return parseFloat(value.toPrecision(precision));\n  };\n}\n","import { streak } from \"./utils.ts\";\n\nexport interface Vector {\n  x: number;\n  y: number;\n  z: number;\n}\n\nexport interface Reading {\n  acceleration: Vector;\n  timestamp: number;\n}\n\nclass Readings {\n  readings: Reading[];\n  constructor(readings: Reading[] = []) {\n    this.readings = readings;\n  }\n  get duration(){\n    if (this.readings.length === 0) {\n      return 0;\n    }\n    var last = this.readings.length;\n    var t0 = this.readings[0].timestamp;\n    var t1 = this.readings[last - 1].timestamp;\n    return (t1 - t0) / 1000;\n  }\n  get flightTime(){\n    var streaks = streak(function (reading: Reading) {\n      var a = reading.acceleration;\n      var magnitude = Math.sqrt(a.x * a.x + a.y * a.y + a.z * a.z);\n      return magnitude < 4;\n    }, this.readings);\n    var flightDurations = streaks.map(function (list) {\n      var last = list.length;\n      var t0 = list[0].timestamp;\n      var t1 = list[last - 1].timestamp;\n      // DEBT remove magic numbers\n      return (t1 + 250 - t0) / 1000;\n    });\n    var flightDuration = Math.max.apply(null, flightDurations);\n    return Math.max(0, flightDuration);\n  }\n  get length() {\n    return this.readings.length;\n  }\n  addReading (newReading: Reading) {\n    return new Readings(this.readings.concat(newReading));\n  }\n}\n\nexport default Readings;\n","import Readings from \"./readings.ts\";\nimport { Reading } from \"./readings.ts\";\nimport { round } from \"./utils.ts\";\n\n// The data logger is implemented as a flux style store.\n// It does not have a dispatch method and currently the application knows directly which methods to call on the data logger\n// Views/Displays are registered with by registerDisplay\n// At the moment after each change of state action a call to updateDisplays must be made manually.\n// DEBT uplink untested\nclass DataLogger {\n  private displays = [];\n  readings = new Readings();\n  status = \"READY\";\n  uplink;\n\n  constructor(uplink){\n    this.uplink = uplink;\n  }\n  // Responses to external actions\n  start(){\n    this.status = \"READING\";\n    this.updateDisplays();\n  }\n  newReading(reading: Reading) {\n    if (this.status == \"READING\") {\n      this.readings = this.readings.addReading(reading);\n      this.uplink.publish(\"accelerometerReading\", reading);\n      this.updateDisplays();\n    }\n  }\n  stop() {\n    this.status = \"COMPLETED\";\n    this.updateDisplays();\n  }\n  reset() {\n    this.status = \"READY\";\n    this.readings = new Readings();\n    this.uplink.publish(\"reset\", null);\n    this.updateDisplays();\n  }\n  get maxAltitude(){\n    // Altitude Calculation\n\n    // SUVAT\n    // s = vt - 0.5 * a * t^2\n    // input\n    // s = s <- desired result\n    // u = ? <- not needed\n    // v = 0 <- stationary at top\n    // a = - 9.81 <- local g\n    // t = flightTime/2 time to top of arc\n\n    // s = 9.81 * 1/8 t^2\n\n    if (this.status == \"COMPLETED\") {\n      var t = this.readings.flightTime;\n      return round(2)(9.81/8 * t * t);\n    } else {\n      return 0;\n    }\n  }\n  updateDisplays() {\n    var self = this;\n    this.displays.forEach(function (view) {\n      view.update(self);\n    });\n  }\n  registerDisplay(display) {\n    this.displays.push(display);\n    display.update(this);\n  }\n  static READY = \"READY\";\n  static READING = \"READING\";\n  static COMPLETED = \"COMPLETED\";\n}\n\nexport default DataLogger;\n","// All code relating to manipulations requiring a document, element or window node.\n\n// DEBT untested\nexport function ready(fn: () => any) {\n  if (document.readyState !== \"loading\"){\n    fn();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", fn);\n  }\n}\n","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\n    var _matcher,\n        _level = 0,\n        _id = 0,\n        _handlers = {},\n        _gatorInstances = {};\n\n    function _addEvent(gator, type, callback) {\n\n        // blur and focus do not bubble up but if you use event capturing\n        // then you will get them\n        var useCapture = type == 'blur' || type == 'focus';\n        gator.element.addEventListener(type, callback, useCapture);\n    }\n\n    function _cancel(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    /**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\n    function _getMatcher(element) {\n        if (_matcher) {\n            return _matcher;\n        }\n\n        if (element.matches) {\n            _matcher = element.matches;\n            return _matcher;\n        }\n\n        if (element.webkitMatchesSelector) {\n            _matcher = element.webkitMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.mozMatchesSelector) {\n            _matcher = element.mozMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.msMatchesSelector) {\n            _matcher = element.msMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.oMatchesSelector) {\n            _matcher = element.oMatchesSelector;\n            return _matcher;\n        }\n\n        // if it doesn't match a native browser method\n        // fall back to the gator function\n        _matcher = Gator.matchesSelector;\n        return _matcher;\n    }\n\n    /**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\n    function _matchesSelector(element, selector, boundElement) {\n\n        // no selector means this event was bound directly to this element\n        if (selector == '_root') {\n            return boundElement;\n        }\n\n        // if we have moved up to the element you bound the event to\n        // then we have come too far\n        if (element === boundElement) {\n            return;\n        }\n\n        // if this is a match then we are done!\n        if (_getMatcher(element).call(element, selector)) {\n            return element;\n        }\n\n        // if this element did not match but has a parent we should try\n        // going up the tree to see if any of the parent elements match\n        // for example if you are looking for a click on an <a> tag but there\n        // is a <span> inside of the a tag that it is the target,\n        // it should still work\n        if (element.parentNode) {\n            _level++;\n            return _matchesSelector(element.parentNode, selector, boundElement);\n        }\n    }\n\n    function _addHandler(gator, event, selector, callback) {\n        if (!_handlers[gator.id]) {\n            _handlers[gator.id] = {};\n        }\n\n        if (!_handlers[gator.id][event]) {\n            _handlers[gator.id][event] = {};\n        }\n\n        if (!_handlers[gator.id][event][selector]) {\n            _handlers[gator.id][event][selector] = [];\n        }\n\n        _handlers[gator.id][event][selector].push(callback);\n    }\n\n    function _removeHandler(gator, event, selector, callback) {\n\n        // if there are no events tied to this element at all\n        // then don't do anything\n        if (!_handlers[gator.id]) {\n            return;\n        }\n\n        // if there is no event type specified then remove all events\n        // example: Gator(element).off()\n        if (!event) {\n            for (var type in _handlers[gator.id]) {\n                if (_handlers[gator.id].hasOwnProperty(type)) {\n                    _handlers[gator.id][type] = {};\n                }\n            }\n            return;\n        }\n\n        // if no callback or selector is specified remove all events of this type\n        // example: Gator(element).off('click')\n        if (!callback && !selector) {\n            _handlers[gator.id][event] = {};\n            return;\n        }\n\n        // if a selector is specified but no callback remove all events\n        // for this selector\n        // example: Gator(element).off('click', '.sub-element')\n        if (!callback) {\n            delete _handlers[gator.id][event][selector];\n            return;\n        }\n\n        // if we have specified an event type, selector, and callback then we\n        // need to make sure there are callbacks tied to this selector to\n        // begin with.  if there aren't then we can stop here\n        if (!_handlers[gator.id][event][selector]) {\n            return;\n        }\n\n        // if there are then loop through all the callbacks and if we find\n        // one that matches remove it from the array\n        for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n            if (_handlers[gator.id][event][selector][i] === callback) {\n                _handlers[gator.id][event][selector].splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    function _handleEvent(id, e, type) {\n        if (!_handlers[id][type]) {\n            return;\n        }\n\n        var target = e.target || e.srcElement,\n            selector,\n            match,\n            matches = {},\n            i = 0,\n            j = 0;\n\n        // find all events that match\n        _level = 0;\n        for (selector in _handlers[id][type]) {\n            if (_handlers[id][type].hasOwnProperty(selector)) {\n                match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n                if (match && Gator.matchesEvent(type, _gatorInstances[id].element, match, selector == '_root', e)) {\n                    _level++;\n                    _handlers[id][type][selector].match = match;\n                    matches[_level] = _handlers[id][type][selector];\n                }\n            }\n        }\n\n        // stopPropagation() fails to set cancelBubble to true in Webkit\n        // @see http://code.google.com/p/chromium/issues/detail?id=162270\n        e.stopPropagation = function() {\n            e.cancelBubble = true;\n        };\n\n        for (i = 0; i <= _level; i++) {\n            if (matches[i]) {\n                for (j = 0; j < matches[i].length; j++) {\n                    if (matches[i][j].call(matches[i].match, e) === false) {\n                        Gator.cancel(e);\n                        return;\n                    }\n\n                    if (e.cancelBubble) {\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\n    function _bind(events, selector, callback, remove) {\n\n        // fail silently if you pass null or undefined as an alement\n        // in the Gator constructor\n        if (!this.element) {\n            return;\n        }\n\n        if (!(events instanceof Array)) {\n            events = [events];\n        }\n\n        if (!callback && typeof(selector) == 'function') {\n            callback = selector;\n            selector = '_root';\n        }\n\n        var id = this.id,\n            i;\n\n        function _getGlobalCallback(type) {\n            return function(e) {\n                _handleEvent(id, e, type);\n            };\n        }\n\n        for (i = 0; i < events.length; i++) {\n            if (remove) {\n                _removeHandler(this, events[i], selector, callback);\n                continue;\n            }\n\n            if (!_handlers[id] || !_handlers[id][events[i]]) {\n                Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n            }\n\n            _addHandler(this, events[i], selector, callback);\n        }\n\n        return this;\n    }\n\n    /**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\n    function Gator(element, id) {\n\n        // called as function\n        if (!(this instanceof Gator)) {\n            // only keep one Gator instance per node to make sure that\n            // we don't create a ton of new objects if you want to delegate\n            // multiple events from the same node\n            //\n            // for example: Gator(document).on(...\n            for (var key in _gatorInstances) {\n                if (_gatorInstances[key].element === element) {\n                    return _gatorInstances[key];\n                }\n            }\n\n            _id++;\n            _gatorInstances[_id] = new Gator(element, _id);\n\n            return _gatorInstances[_id];\n        }\n\n        this.element = element;\n        this.id = id;\n    }\n\n    /**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.on = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback);\n    };\n\n    /**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.off = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback, true);\n    };\n\n    Gator.matchesSelector = function() {};\n    Gator.cancel = _cancel;\n    Gator.addEvent = _addEvent;\n    Gator.matchesEvent = function() {\n        return true;\n    };\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Gator;\n    }\n\nexport default Gator;\n","console.log(\"Starting boot ...\");\n\ndeclare var Ably: any;\ndeclare var Chart: any;\n// Uplink represents a single channel\nclass Uplink {\n  channel: any;\n  constructor(options) {\n    var key = options[\"key\"];\n    var channelName = options[\"channelName\"];\n    var realtime = new Ably.Realtime({ key: key });\n    this.channel = realtime.channels.get(channelName);\n  }\n  publish(eventName, vector){\n    this.channel.publish(eventName, vector, function(err) {\n      if(err) {\n        console.log(\"Unable to publish message; err = \" + err.message);\n      } else {\n        console.log(\"Message successfully sent\");\n      }\n    });\n  }\n  subscribe(eventName, callback) {\n    this.channel.subscribe(eventName, callback);\n  }\n}\n\nif (getChannelName()) {\n  var uplink = new Uplink({key: getUplinkKey(), channelName: getChannelName()});\n}\n\nimport Events from \"./gator.js\";\n\n// Interfaces are where user interaction is transformed to domain interactions\n// There is only one interface in this application, this one the avionics interface\n// It can therefore be set up to run on the document element\nclass AvionicsInterface {\n  private $root;\n  private actions;\n  constructor ($root, actions) {\n    this.$root = $root;\n    this.actions = actions;\n    var events = Events($root, null);\n    events.on(\"click\", \"[data-command~=start]\", function (evt: Event) {\n      actions.startLogging();\n    });\n    events.on(\"click\", \"[data-command~=stop]\", function (evt: Event) {\n      actions.stopLogging();\n    });\n    events.on(\"click\", \"[data-command~=reset]\", function (evt: Event) {\n      actions.clearDataLog();\n    });\n  }\n}\n\nimport DataLogger from \"./data-logger.ts\";\n\nimport ActionDispatcher from \"./action-dispatcher.ts\";\n\nvar startLogging = new ActionDispatcher<void>();\nvar stopLogging = new ActionDispatcher<void>();\nvar clearDataLog = new ActionDispatcher<void>();\nvar newReading = new ActionDispatcher<any>();\n\n// The actions class acts as the dispatcher in a fluc architecture\n// It also acts as the actions interface that is put on top of the dispatcher\n// Stores are not registered generally as there is only two stores the datalogger and the uplink\nclass Actions {\n  dataLogger: DataLogger;\n  uplink: Uplink;\n  startLogging(){\n    startLogging.dispatch();\n  }\n  stopLogging(){\n    stopLogging.dispatch();\n  }\n  newReading(reading) {\n    newReading.dispatch(reading);\n  }\n  clearDataLog(){\n    clearDataLog.dispatch();\n  }\n}\n\nvar actions = new Actions();\n\nvar dataLogger = new DataLogger(uplink);\n\nactions.dataLogger = dataLogger;\nstartLogging.addListener(dataLogger.start.bind(dataLogger));\nstopLogging.addListener(dataLogger.stop.bind(dataLogger));\nclearDataLog.addListener(dataLogger.reset.bind(dataLogger));\nnewReading.addListener(dataLogger.newReading.bind(dataLogger));\n\n// Display elements are updated with the state of a store when they are registered to the store.\n// DEBT the data logger display will cause an error if the elements are not present, this error should be caught by the dispatcher when it is registered\nclass DataLoggerDisplay {\n  $root: Element;\n  $flightTime: any;\n  $maxAltitude;\n  $startButton;\n  $stopButton;\n  $resetButton;\n  constructor($root){\n    this.$root = $root;\n    this.$flightTime = $root.querySelector(\"[data-hook~=flight-time]\");\n    this.$maxAltitude = $root.querySelector(\"[data-hook~=max-altitude]\");\n    this.$startButton = $root.querySelector(\"[data-command~=start]\");\n    this.$stopButton = $root.querySelector(\"[data-command~=stop]\");\n    this.$resetButton = $root.querySelector(\"[data-command~=reset]\");\n    var regex = /^\\/([^\\/]+)/;\n    var channel = window.location.pathname.match(regex)[1];\n    var $channelName = $root.querySelector(\"[data-hook~=channel-name]\");\n    $channelName.innerHTML = \"Watch on channel '\" + channel + \"'\";\n  }\n  update (state) {\n    this.$flightTime.innerHTML = state.readings.flightTime + \"s\";\n    console.log(state);\n    this.$maxAltitude.innerHTML = state.maxAltitude + \"m\";\n\n    if (state.status == DataLogger.READY) {\n      this.$startButton.hidden = false;\n    } else {\n      this.$startButton.hidden = true;\n    }\n    if (state.status == DataLogger.READING) {\n      this.$stopButton.hidden = false;\n    } else {\n      this.$stopButton.hidden = true;\n    }\n    if (state.status == DataLogger.COMPLETED) {\n      this.$resetButton.hidden = false;\n    } else {\n      this.$resetButton.hidden = true;\n    }\n  }\n}\n\nfunction reportDeviceMotionEvent (deviceMotionEvent) {\n  var raw = deviceMotionEvent.accelerationIncludingGravity;\n  if (typeof raw.x === \"number\") {\n    actions.newReading({acceleration: {x: raw.x, y: raw.y, z: raw.z}, timestamp: Date.now()});\n  }\n  else {\n    console.warn(\"Device accelerometer returns null data\");\n  }\n}\n\nimport { throttle } from \"./utils.ts\";\n\nvar throttledReport = throttle(reportDeviceMotionEvent, 250, {});\n\n// Accelerometer events are continually fired\n// DEBT the accelerometer is not isolated as a store that can be observed.\n// Implementation as a store will be necessary so that it can be observed and error messages when the accelerometer returns improper values can be\nwindow.addEventListener(\"devicemotion\", throttledReport);\n\nimport { ready } from \"./dom.ts\";\nready(function () {\n  var $dataLoggerDisplay = document.querySelector(\"[data-display~=data-logger]\");\n  if ($dataLoggerDisplay) {\n    var dataLoggerDisplay = new DataLoggerDisplay($dataLoggerDisplay);\n    dataLogger.registerDisplay(dataLoggerDisplay);\n  }\n\n\n  var $avionics = document.querySelector(\"[data-interface~=avionics]\");\n  var avionicsInterface = new AvionicsInterface($avionics, actions);\n});\n\nexport default actions;\n\nfunction getChannelName(){\n  var regex = /^\\/([^\\/]+)/;\n  var match = window.location.pathname.match(regex);\n  if (match) {\n    return match[1];\n  }\n}\n\nfunction getUplinkKey(): string{\n  var match = window.location.hash.match(/#(.+)/);\n  if (match) {\n    return match[1];\n  }\n}\n\n\n\n\n\nready(function () {\n  var $tracker = document.querySelector(\"[data-display~=tracker]\");\n  // Procedual handling of canvas drawing\n  if ($tracker) {\n    var canvas: any = document.querySelector(\"#myChart\");\n    var ctx = canvas.getContext(\"2d\");\n    var myNewChart = new Chart(ctx);\n    var data = {\n      labels: [],\n      datasets: [{\n        label: \"My First dataset\",\n        fillColor: \"rgba(220,220,220,0)\",\n        strokeColor: \"limegreen\",\n        pointColor: \"limegreen\",\n        data: []\n      }, {\n        label: \"My First dataset\",\n        fillColor: \"rgba(220,220,220,0)\",\n        strokeColor: \"green\",\n        pointColor: \"green\",\n        data: []\n      }, {\n        label: \"My First dataset\",\n        fillColor: \"rgba(220,220,220,0)\",\n        strokeColor: \"teal\",\n        pointColor: \"teal\",\n        data: []\n      }, {\n        label: \"My First dataset\",\n        fillColor: \"rgba(220,220,220,0)\",\n        strokeColor: \"orange\",\n        pointColor: \"orange\",\n        data: []\n      }]\n    };\n    var myLineChart = new Chart(ctx).Line(data, {animation: false, animationSteps: 4, pointDot : false});\n    var i = 0.0;\n    uplink.subscribe(\"accelerometerReading\", function(message) {\n      var x = message.data.acceleration.x;\n      var y = message.data.acceleration.y;\n      var z = message.data.acceleration.z;\n      console.log(message.data);\n      var m = Math.sqrt(x*x + y*y + z*z);\n      myLineChart.addData([x, y, z, m], i);\n      i = i + 0.25;\n    });\n    uplink.subscribe(\"reset\", function(message) {\n      console.log(\"bananas\");\n      myLineChart.destroy();\n      i = 0.0;\n      data.labels = [];\n      // labels array is mutated by adding data.\n      myLineChart = new Chart(ctx).Line(data, {animation: false, animationSteps: 4, pointDot : false});\n    });\n  }\n});\n"],"names":[],"mappings":"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"}