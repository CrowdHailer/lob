{"version":3,"file":"lob.js","sources":["..//home/peter/Workshop14/lob/client/utils/utils.js","..//home/peter/Workshop14/lob/client/framework/logger.js","..//home/peter/Workshop14/lob/client/framework/dispatcher.js","..//home/peter/Workshop14/lob/client/framework/event.js","..//home/peter/Workshop14/lob/client/framework/general-store.js","..//home/peter/Workshop14/lob/client/polyfill.js","..//home/peter/Workshop14/lob/client/state.js","..//home/peter/Workshop14/lob/client/store.js","..//home/peter/Workshop14/lob/client/accelerometer.js","..//home/peter/Workshop14/lob/client/utils/location.js","..//home/peter/Workshop14/lob/client/uplink.js","..//home/peter/Workshop14/lob/client/client.js","..//home/peter/Workshop14/lob/client/utils/dom.js","..//home/peter/Workshop14/lob/client/vendor/gator.js","..//home/peter/Workshop14/lob/client/avionics/controller.js","..//home/peter/Workshop14/lob/client/avionics/display.js","..//home/peter/Workshop14/lob/client/avionics/presenter.js","..//home/peter/Workshop14/lob/client/avionics/avionics.js","..//home/peter/Workshop14/lob/client/notices/controller.js","..//home/peter/Workshop14/lob/client/notices/display.js","..//home/peter/Workshop14/lob/client/notices/notices.js","..//home/peter/Workshop14/lob/client/boot.js"],"sourcesContent":["/* jshint esnext: true */\n\nexport function argsToArray(args){\n  return Array.prototype.slice.call(args);\n}\n\nexport function throttle(fn, threshhold, scope) {\n  threshhold = threshhold || 250;\n  var last,\n  deferTimer;\n  return function () {\n    var context = scope || this;\n    var now = Date.now(), args = arguments;\n\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer);\n      deferTimer = setTimeout(function () {\n        last = now;\n        fn.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n}\n","/* jshint esnext: true */\nimport { argsToArray } from \"../utils/utils\";\n\nexport function wrap(logger, settings){\n  var prefix;\n  var notices = [];\n  if (settings.prefix){\n    prefix = \"[\" + settings.prefix + \"]\";\n    notices = notices.concat(prefix);\n  }\n  function debug(){\n    logger.debug.apply(logger, notices.concat(argsToArray(arguments)));\n  }\n  function info(){\n    logger.info.apply(logger, notices.concat(argsToArray(arguments)));\n  }\n  function warn(a){\n    var args = argsToArray(arguments);\n    logger.warn.apply(logger, notices.concat(args));\n  }\n  function error(e){\n    var args = argsToArray(arguments);\n    logger.error.apply(logger, notices.concat(args));\n  }\n  return {\n    debug: debug,\n    info: info,\n    warn: warn,\n    error: error,\n  };\n}\n\nexport var silent = {\n  debug: function(){  },\n  info: function(){  },\n  warn: function(){  },\n  // error logging should be used for errors and in development these should be thrown\n  error: function(e){ throw e; }\n};\n\nexport var development = {\n  debug: function(){\n    var args = argsToArray(arguments);\n    console.debug.apply(console, args);\n  },\n  info: function(){\n    var args = argsToArray(arguments);\n    console.info.apply(console, args);\n  },\n  warn: function(){\n    var args = argsToArray(arguments);\n    console.warn.apply(console, args);\n  },\n  error: function(e){\n    var args = argsToArray(arguments);\n    var error = args[args.length - 1];\n    console.info.apply(console, args);\n    throw error;\n  }\n};\n\nexport var NullLogger = {\n  info: function(a){  },\n  warn: function(a){  },\n  error: function(a){  },\n};\n","/* jshint esnext: true */\n\nimport { silent } from \"./logger\";\n\n// Raise Error for circular calls\nfunction Dispatcher(handlers, logger){\n  this.dispatch = function(){\n    var args = arguments;\n    handlers.forEach(function(handler){\n      try {\n        handler.apply({}, args);\n      } catch(e) {\n        logger.error(e);\n      }\n    });\n\n    if (handlers.length === 0) {\n      logger.warn.apply(logger, args);\n    } else {\n      logger.info.apply(logger, args);\n    }\n  };\n  this.register = function(handler){\n    return new Dispatcher(handlers.concat(handler), logger);\n  };\n}\n\nexport function create(logger){\n  if (logger == void 0) {\n    logger = silent;\n  }\n  return new Dispatcher([], logger);\n}\nexport default Dispatcher;\n","/* jshint esnext: true */\n\nimport * as Dispatcher from \"./dispatcher\";\nimport { silent } from \"./logger\";\nimport { argsToArray } from \"../utils/utils\";\n\n\n// Simply a stateful dispatcher\nexport function start(logger){\n  if (logger == void 0) { logger = silent; }\n\n  var dispatcher = Dispatcher.create(logger);\n\n  var action = function(){\n    var args = argsToArray(arguments);\n    dispatcher.dispatch.apply({}, args);\n  };\n  action.register = function(handler){\n    dispatcher = dispatcher.register(handler);\n  };\n\n  return action;\n}\n","/* jshint esnext: true */\n\n// State will never be assigned if evolver throws error\n// - no need for rollback;\n// Handle errors in logger?\n// - if wanted then the evolver should push errors to logger\n// Advance function to return instance of store?\n// Option to instantiate store with state\nexport function GeneralStore(state, handlers){\n  var store = this;\n\n  function advance(evolver){\n    state = evolver(state);\n  }\n\n  this.advance = advance;\n\n  function wrapHandler(handler){\n    return function(){\n      var args = Array.prototype.slice.call(arguments);\n      state = handler.apply({}, [state].concat(args));\n    };\n  }\n\n  for (var name in handlers) {\n    this[name] = wrapHandler(handlers[name]);\n  }\n\n  Object.defineProperty(this, \"state\", {\n    get: function(){ return state; }\n  });\n\n}\n\nexport function enhance(handlers){\n  return {\n    start: function(state){\n      return new GeneralStore(state, handlers);\n    }\n  };\n}\n\nexport function start(state){\n  return new GeneralStore(state, {});\n}\n","if (!Object.assign) {\n  Object.defineProperty(Object, 'assign', {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function(target) {\n      'use strict';\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert first argument to object');\n      }\n\n      var to = Object(target);\n      for (var i = 1; i < arguments.length; i++) {\n        var nextSource = arguments[i];\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n        nextSource = Object(nextSource);\n\n        var keysArray = Object.keys(nextSource);\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n          var nextKey = keysArray[nextIndex];\n          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n          if (desc !== undefined && desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      return to;\n    }\n  });\n}\n","/* jshint esnext: true */\nimport \"./polyfill\";\n\nfunction lens(key){\n  return function(func){\n    return function(obj){\n      obj = obj || key;\n      var update = {};\n      update[key] = func(obj[key]);\n      return Object.assign({}, obj, update);\n    };\n  };\n}\n\nvar compose = function () {\n  var fns = arguments;\n\n  return function (result) {\n    for (var i = fns.length - 1; i > -1; i--) {\n      result = fns[i].call(this, result);\n    }\n\n    return result;\n  };\n};\n\nvar FREEFALL_LIMIT = 4;\n\nvar Reading = {\n  freefall: function(reading){\n    var a = reading.acceleration;\n    var magnitude = Math.sqrt(a.x * a.x + a.y * a.y + a.z * a.z);\n    return magnitude < FREEFALL_LIMIT;\n  }\n};\n\nvar EMPTY_READINGS = Object.freeze({\n  currentFlight: [],\n  current: null,\n  flightHistory: []\n});\n\nvar readings = {\n  reset: function(_readings){\n    return EMPTY_READINGS;\n  },\n  // new: function(readings, reading){\n  //   return Object.assign({}, readings, {current: reading});\n  // }\n};\n\nexport var resetReadings = lens(\"readings\")(readings.reset);\n\nexport function newReading(state, current){\n  state = state || {};\n  var readings = state.readings || EMPTY_READINGS;\n  var currentFlight = readings.currentFlight;\n  var flightHistory = readings.flightHistory;\n  if (Reading.freefall(current)) {\n    currentFlight = currentFlight.concat(current);\n  } else if(currentFlight[0]) {\n    flightHistory = flightHistory.concat([currentFlight]);\n    currentFlight = [];\n  }\n  readings = {current: current, currentFlight: currentFlight, flightHistory: flightHistory};\n  return Object.assign({}, state, {readings: readings});\n}\n\nexport function badReading(state){\n  var MESSAGE = \"Could not read the data from this device. Please try again on a mobile with working accelerometer.\";\n  return showAlert(state, MESSAGE);\n}\nexport function showAlert(state, message){\n  state = state || {};\n  var notices = state.notices || [];\n  notices = notices.concat(message);\n  return Object.assign({}, state, {notices: notices});\n}\n\nexport function closeNotices(state){\n  state = state || {};\n  var notices = [];\n  return Object.assign({}, state, {notices: notices});\n}\n\nexport function uplinkAvailable(state){\n  state = state || {};\n  var uplink = state.uplink || {};\n  return Object.assign({}, state, {uplink: {status: \"AVAILABLE\"}});\n}\nexport function startTransmitting(state){\n  state = state || {};\n  var uplink = state.uplink || {};\n  return Object.assign({}, state, {uplink: {status: \"TRANSMITTING\"}});\n}\nexport function uplinkFailed(state){\n  state = state || {};\n  var uplink = state.uplink || {};\n  return Object.assign({}, state, {uplink: {status: \"FAILED\"}});\n}\n","/* jshint esnext: true */\n\nimport * as GeneralStore from \"./framework/general-store\";\nimport * as StateUpdates from \"./state\";\n\nvar Store = GeneralStore.enhance(StateUpdates);\n\nexport default Store;\n","/* jshint esnext: true */\n\nvar DEVICEMOTION = \"devicemotion\";\nvar THROTTLE_RATE = 100; // ms\n\nimport { throttle } from \"./utils/utils\";\n\nexport default function Accelerometer(app){\n  function reportDeviceMotionEvent (deviceMotionEvent) {\n    var raw = deviceMotionEvent.accelerationIncludingGravity;\n    if (typeof raw.x === \"number\") {\n      app.newReading({acceleration: {x: raw.x, y: raw.y, z: raw.z}, timestamp: Date.now()});\n    }\n    else {\n      app.badReading(raw);\n    }\n  }\n\n  var throttledReport = throttle(reportDeviceMotionEvent, THROTTLE_RATE);\n\n  return {\n    start: function(){\n      window.addEventListener(DEVICEMOTION, throttledReport);\n    }\n  };\n}\n","export function getQueryParameter(name) {\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n        results = regex.exec(location.search);\n    return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n","/* jshint esnext: true */\n\nimport { getQueryParameter } from \"./utils/location\";\n\nexport default function(app){\n  // TODO should be from location object fetched from context;\n  var channelName = getQueryParameter(\"channel\");\n  var token = getQueryParameter(\"token\");\n\n  var channel;\n  function start(){\n    console.debug(\"initializing uplink on channel \" + channelName);\n\n    var realtime = new Ably.Realtime({ token: token });\n    channel = realtime.channels.get(channelName);\n    realtime.connection.on(\"connected\", function(err) {\n      app.uplinkAvailable();\n    });\n    realtime.connection.on(\"failed\", function(err) {\n      app.uplinkFailed(err.reason);\n    });\n    app.onStartTransmitting(uplink.startTransmitting);\n    app.onNewReading(uplink.newReading);\n  }\n\n  var uplink = {\n    startTransmitting: function(){\n      // console.log(app.uplinkStatus);\n    },\n    newReading: function(r){\n      var doTransmit = app.uplinkStatus == \"TRANSMITTING\";\n      if (doTransmit) {\n        channel.publish(\"new Reading\", \"reading\", function(err) {\n          if(err) {\n            console.warn(\"Unable to publish message; err = \" + err.message);\n          } else {\n            console.info(\"Message successfully sent\");\n          }\n        });\n      }\n    },\n    // TODO start should be callable once\n    start: start\n  };\n\n\n  return uplink;\n}\n","/* jshint esnext: true */\nimport * as Event from \"./framework/event\";\nimport * as Logger from \"./framework/logger\";\nimport Store from \"./store\";\nimport Accelerometer from \"./accelerometer\";\nimport Uplink from \"./uplink\";\n\nfunction Client(world){\n  var logger = world.console;\n  var events = {\n    resetReadings: Event.start(Logger.wrap(logger, {prefix: \"Reset readings\"})),\n    newReading: Event.start(Logger.wrap(logger, {prefix: \"New reading\"})),\n    badReading: Event.start(Logger.wrap(logger, {prefix: \"Bad reading\"})),\n    uplinkAvailable: Event.start(Logger.wrap(logger, {prefix: \"Uplink available\"})),\n    startTransmitting: Event.start(Logger.wrap(logger, {prefix: \"Start transmitting\"})),\n    uplinkFailed: Event.start(Logger.wrap(logger, {prefix: \"Uplink failed\"})),\n    showAlert: Event.start(Logger.wrap(logger, {prefix: \"Show alert\"})),\n    closeNotices: Event.start(Logger.wrap(logger, {prefix: \"Close Notices\"}))\n  };\n\n  var store = Store.start({});\n  events.resetReadings.register(store.resetReadings);\n  events.newReading.register(store.newReading);\n  events.badReading.register(store.badReading);\n  events.uplinkAvailable.register(store.uplinkAvailable);\n  events.startTransmitting.register(store.startTransmitting);\n  events.uplinkFailed.register(store.uplinkFailed);\n  events.showAlert.register(store.showAlert);\n  events.closeNotices.register(store.closeNotices);\n\n  this.accelerometer = Accelerometer(this);\n\n  this.uplink = Uplink(this);\n\n  this.resetReadings = function(){\n    events.resetReadings();\n  };\n  this.onResetReadings = function(listener){\n    events.resetReadings.register(listener);\n  };\n  this.newReading = function(reading){\n    // Validate here\n    events.newReading(reading);\n  };\n  this.onNewReading = function(listener){\n    events.newReading.register(listener);\n  };\n  this.badReading = function(){\n    events.badReading();\n  };\n  this.onBadReading = function(listener){\n    events.badReading.register(listener);\n  };\n  this.uplinkAvailable = function(){\n    events.uplinkAvailable();\n  };\n  this.onUplinkAvailable = function(listener){\n    events.uplinkAvailable.register(listener);\n  };\n  this.startTransmitting = function(){\n    if (store.state.uplink.status == \"AVAILABLE\") {\n      events.startTransmitting();\n    } else {\n      events.showAlert(\"Could not start a connection. Please refresh the page to try again.\");\n    }\n  };\n  this.onStartTransmitting = function(listener){\n    events.startTransmitting.register(listener);\n  };\n  this.uplinkFailed = events.uplinkFailed;\n  this.onUplinkFailed = function(listener){\n    events.uplinkFailed.register(listener);\n  };\n  this.onShowAlert = function(listener){\n    events.showAlert.register(listener);\n  };\n  this.closeNotices = function(){\n    events.closeNotices();\n  };\n  this.onCloseNotices = function(listener){\n    events.closeNotices.register(listener);\n  };\n\n  Object.defineProperty(this, \"currentReading\", {\n    get: function(){\n      var readings = store.state.readings || {};\n      return readings.current;\n    }\n  });\n\n  Object.defineProperty(this, \"currentFlight\", {\n    get: function(){\n      var readings = store.state.readings || {};\n      return readings.currentFlight || [];\n    }\n  });\n  Object.defineProperty(this, \"flightHistory\", {\n    get: function(){\n      var readings = store.state.readings || {};\n      return readings.flightHistory || [];\n    }\n  });\n  Object.defineProperty(this, \"notices\", {\n    get: function(){\n      return store.state.notices;\n    }\n  });\n\n  Object.defineProperty(this, \"uplinkStatus\", {\n    get: function(){\n      var uplink = store.state.uplink || {status: \"UNKNOWN\"};\n      return uplink.status;\n    }\n  });\n  // DEBT do not start here or enuse that components read first time on starting.\n  // events.resetReadings();\n}\n\nexport function start(world){\n  return new Client(world);\n}\n","/* jshint esnext: true */\n\nexport function ready(fn) {\n  if (document.readyState !== \"loading\"){\n    fn();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", fn);\n  }\n}\n","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\n    var _matcher,\n        _level = 0,\n        _id = 0,\n        _handlers = {},\n        _gatorInstances = {};\n\n    function _addEvent(gator, type, callback) {\n\n        // blur and focus do not bubble up but if you use event capturing\n        // then you will get them\n        var useCapture = type == 'blur' || type == 'focus';\n        gator.element.addEventListener(type, callback, useCapture);\n    }\n\n    function _cancel(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    /**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\n    function _getMatcher(element) {\n        if (_matcher) {\n            return _matcher;\n        }\n\n        if (element.matches) {\n            _matcher = element.matches;\n            return _matcher;\n        }\n\n        if (element.webkitMatchesSelector) {\n            _matcher = element.webkitMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.mozMatchesSelector) {\n            _matcher = element.mozMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.msMatchesSelector) {\n            _matcher = element.msMatchesSelector;\n            return _matcher;\n        }\n\n        if (element.oMatchesSelector) {\n            _matcher = element.oMatchesSelector;\n            return _matcher;\n        }\n\n        // if it doesn't match a native browser method\n        // fall back to the gator function\n        _matcher = Gator.matchesSelector;\n        return _matcher;\n    }\n\n    /**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\n    function _matchesSelector(element, selector, boundElement) {\n\n        // no selector means this event was bound directly to this element\n        if (selector == '_root') {\n            return boundElement;\n        }\n\n        // if we have moved up to the element you bound the event to\n        // then we have come too far\n        if (element === boundElement) {\n            return;\n        }\n\n        // if this is a match then we are done!\n        if (_getMatcher(element).call(element, selector)) {\n            return element;\n        }\n\n        // if this element did not match but has a parent we should try\n        // going up the tree to see if any of the parent elements match\n        // for example if you are looking for a click on an <a> tag but there\n        // is a <span> inside of the a tag that it is the target,\n        // it should still work\n        if (element.parentNode) {\n            _level++;\n            return _matchesSelector(element.parentNode, selector, boundElement);\n        }\n    }\n\n    function _addHandler(gator, event, selector, callback) {\n        if (!_handlers[gator.id]) {\n            _handlers[gator.id] = {};\n        }\n\n        if (!_handlers[gator.id][event]) {\n            _handlers[gator.id][event] = {};\n        }\n\n        if (!_handlers[gator.id][event][selector]) {\n            _handlers[gator.id][event][selector] = [];\n        }\n\n        _handlers[gator.id][event][selector].push(callback);\n    }\n\n    function _removeHandler(gator, event, selector, callback) {\n\n        // if there are no events tied to this element at all\n        // then don't do anything\n        if (!_handlers[gator.id]) {\n            return;\n        }\n\n        // if there is no event type specified then remove all events\n        // example: Gator(element).off()\n        if (!event) {\n            for (var type in _handlers[gator.id]) {\n                if (_handlers[gator.id].hasOwnProperty(type)) {\n                    _handlers[gator.id][type] = {};\n                }\n            }\n            return;\n        }\n\n        // if no callback or selector is specified remove all events of this type\n        // example: Gator(element).off('click')\n        if (!callback && !selector) {\n            _handlers[gator.id][event] = {};\n            return;\n        }\n\n        // if a selector is specified but no callback remove all events\n        // for this selector\n        // example: Gator(element).off('click', '.sub-element')\n        if (!callback) {\n            delete _handlers[gator.id][event][selector];\n            return;\n        }\n\n        // if we have specified an event type, selector, and callback then we\n        // need to make sure there are callbacks tied to this selector to\n        // begin with.  if there aren't then we can stop here\n        if (!_handlers[gator.id][event][selector]) {\n            return;\n        }\n\n        // if there are then loop through all the callbacks and if we find\n        // one that matches remove it from the array\n        for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n            if (_handlers[gator.id][event][selector][i] === callback) {\n                _handlers[gator.id][event][selector].splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    function _handleEvent(id, e, type) {\n        if (!_handlers[id][type]) {\n            return;\n        }\n\n        var target = e.target || e.srcElement,\n            selector,\n            match,\n            matches = {},\n            i = 0,\n            j = 0;\n\n        // find all events that match\n        _level = 0;\n        for (selector in _handlers[id][type]) {\n            if (_handlers[id][type].hasOwnProperty(selector)) {\n                match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n                if (match && Gator.matchesEvent(type, _gatorInstances[id].element, match, selector == '_root', e)) {\n                    _level++;\n                    _handlers[id][type][selector].match = match;\n                    matches[_level] = _handlers[id][type][selector];\n                }\n            }\n        }\n\n        // stopPropagation() fails to set cancelBubble to true in Webkit\n        // @see http://code.google.com/p/chromium/issues/detail?id=162270\n        e.stopPropagation = function() {\n            e.cancelBubble = true;\n        };\n\n        for (i = 0; i <= _level; i++) {\n            if (matches[i]) {\n                for (j = 0; j < matches[i].length; j++) {\n                    if (matches[i][j].call(matches[i].match, e) === false) {\n                        Gator.cancel(e);\n                        return;\n                    }\n\n                    if (e.cancelBubble) {\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\n    function _bind(events, selector, callback, remove) {\n\n        // fail silently if you pass null or undefined as an alement\n        // in the Gator constructor\n        if (!this.element) {\n            return;\n        }\n\n        if (!(events instanceof Array)) {\n            events = [events];\n        }\n\n        if (!callback && typeof(selector) == 'function') {\n            callback = selector;\n            selector = '_root';\n        }\n\n        var id = this.id,\n            i;\n\n        function _getGlobalCallback(type) {\n            return function(e) {\n                _handleEvent(id, e, type);\n            };\n        }\n\n        for (i = 0; i < events.length; i++) {\n            if (remove) {\n                _removeHandler(this, events[i], selector, callback);\n                continue;\n            }\n\n            if (!_handlers[id] || !_handlers[id][events[i]]) {\n                Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n            }\n\n            _addHandler(this, events[i], selector, callback);\n        }\n\n        return this;\n    }\n\n    /**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\n    function Gator(element, id) {\n\n        // called as function\n        if (!(this instanceof Gator)) {\n            // only keep one Gator instance per node to make sure that\n            // we don't create a ton of new objects if you want to delegate\n            // multiple events from the same node\n            //\n            // for example: Gator(document).on(...\n            for (var key in _gatorInstances) {\n                if (_gatorInstances[key].element === element) {\n                    return _gatorInstances[key];\n                }\n            }\n\n            _id++;\n            _gatorInstances[_id] = new Gator(element, _id);\n\n            return _gatorInstances[_id];\n        }\n\n        this.element = element;\n        this.id = id;\n    }\n\n    /**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.on = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback);\n    };\n\n    /**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\n    Gator.prototype.off = function(events, selector, callback) {\n        return _bind.call(this, events, selector, callback, true);\n    };\n\n    Gator.matchesSelector = function() {};\n    Gator.cancel = _cancel;\n    Gator.addEvent = _addEvent;\n    Gator.matchesEvent = function() {\n        return true;\n    };\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Gator;\n    }\n\nexport default Gator;\n","/* jshint esnext: true */\n\nimport Events from \"../vendor/gator.js\";\n\nexport default function Controller($root, app){\n  var events = Events($root);\n  events.on(\"click\", \"[data-command~=reset]\", function(evt){\n    app.resetReadings();\n  });\n  events.on(\"click\", \"[data-command~=start-transmitting]\", function(evt){\n    app.startTransmitting();\n  });\n}\n","/* jshint esnext: true */\n\nfunction Display($root){\n  var $maxFlightTime = $root.querySelector(\"[data-hook~=flight-time]\");\n  var $maxAltitude = $root.querySelector(\"[data-hook~=max-altitude]\");\n  var $currentReadout = $root.querySelector(\"[data-hook~=current-reading]\");\n  var $instruction = $root.querySelector(\"[data-display~=instruction]\");\n  var $uplink = $root.querySelector(\"[data-display~=uplink]\");\n\n  return Object.create({}, {\n    maxFlightTime: {\n      set: function(maxFlightTime){\n        $maxFlightTime.innerHTML = maxFlightTime;\n      },\n      enumerable: true\n    },\n    maxAltitude: {\n      set: function(maxAltitude){\n        $maxAltitude.innerHTML = maxAltitude;\n      },\n      enumerable: true\n    },\n    currentReadout: {\n      set: function(currentReadout){\n        $currentReadout.innerHTML = currentReadout;\n      },\n      enumerable: true\n    },\n    instruction: {\n      set: function(instruction){\n        $instruction.innerHTML = instruction;\n      },\n      enumerable: true\n    },\n    uplinkStatus: {\n      set: function(status){\n        console.log(\"setting status\");\n        $uplink.classList.remove(\"unknown\");\n        $uplink.classList.remove(\"available\");\n        $uplink.classList.remove(\"transmitting\");\n        $uplink.classList.remove(\"failed\");\n        $uplink.classList.add(status);\n      },\n      enumerable: true\n    }\n  });\n\n}\n\nexport function create($root){ Display($root); }\n\nexport default Display;\n","/* jshint esnext: true */\n\nfunction readingsDuration(readings){\n  if (!readings[0]) { return 0; }\n  var last = readings.length;\n  var t0 = readings[0].timestamp;\n  var t1 = readings[last - 1].timestamp;\n  // DEBT Magic number that make sense when sample rate is every 250ms\n  return (t1 + 250 - t0) / 1000;\n}\nfunction altitudeForFreefallDuration(duration){\n  // Altitude Calculation\n\n  // SUVAT\n  // s = vt - 0.5 * a * t^2\n  // input\n  // s = s <- desired result\n  // u = ? <- not needed\n  // v = 0 <- stationary at top\n  // a = - 9.81 <- local g\n  // t = flightTime/2 time to top of arc\n\n  // s = 9.81 * 1/8 t^2\n  var t = duration;\n  return 9.81/8 * t * t;\n}\n\nexport function format(i){\n  var fixed = i.toFixed(2);\n  var signed = i < 0 ? fixed : \"+\" + fixed;\n  var short = \"+00.00\".length - signed.length;\n  var padded = (short == 1) ? signed.replace(/[\\+\\-]/, function(sign){ return sign + \"0\"; }) : signed;\n  return padded;\n}\n\nfunction Presenter(raw){\n\n  Object.defineProperty(this, \"maxFlightTime\", {\n    get: function(){\n      var flights = raw.flightHistory.concat([raw.currentFlight]);\n      var flightDurations = flights.map(readingsDuration);\n      var time =  Math.max.apply(null, flightDurations);\n      return time.toFixed(2) + \" s\";\n    }\n  });\n\n  Object.defineProperty(this, \"maxAltitude\", {\n    get: function(){\n      var flightDurations = raw.flightHistory.map(readingsDuration);\n      var max = Math.max.apply(null, [0].concat(flightDurations));\n      return altitudeForFreefallDuration(max).toFixed(2) + \" m\";\n    }\n  });\n\n  Object.defineProperty(this, \"currentReadout\", {\n    get: function(){\n      if (!raw.currentReading) {\n        return \"Waiting.\";\n      }\n      var acceleration = raw.currentReading.acceleration;\n      var x = acceleration.x;\n      var y = acceleration.y;\n      var z = acceleration.z;\n      return \"[\" + [format(x), format(y), format(z)].join(\", \") + \"]\";\n    }\n  });\n\n  Object.defineProperty(this, \"instruction\", {\n    get: function(){\n      if (this.maxAltitude == \"0.00 m\") {\n        return \"Lob phone to get started\";\n      }\n      return \"OK! can you lob any higher\";\n    }\n  });\n\n  Object.defineProperty(this, \"uplinkStatus\", {\n    get: function(){\n      return raw.uplinkStatus.toLowerCase();\n    }\n  });\n}\n\nexport function present(app){\n  return new Presenter(app);\n}\nexport default present;\n","/* jshint esnext: true */\n\nimport Controller from \"./controller\";\nimport Display from \"./display\";\nimport Presenter from \"./presenter\";\n\nexport default function create($root, app){\n  app.accelerometer.start();\n  app.uplink.start();\n\n  var controller = Controller($root, app);\n\n  var display = Display($root);\n  var presenter = Presenter(app);\n\n  function update(){\n    for (var attribute in display) {\n      if (display.hasOwnProperty(attribute)) {\n        display[attribute] = presenter[attribute];\n      }\n    }\n  }\n\n  app.onResetReadings(update);\n  app.onNewReading(update);\n  app.onUplinkAvailable(update);\n  app.onUplinkFailed(update);\n  app.onStartTransmitting(update);\n  // Needs to reset state before implementation\n  // update();\n  return {\n    update: update\n  };\n}\n","/* jshint esnext: true */\n\nimport Events from \"../vendor/gator.js\";\n\nexport default function Controller($root, app){\n  var events = Events($root);\n  events.on(\"click\", function(evt){\n    app.closeNotices();\n  });\n}\n","/* jshint esnext: true */\n\nexport default function Display($root){\n  var $message = $root.querySelector(\"[data-display~=message]\");\n  return Object.create({}, {\n    active: {\n      set: function(active){\n        var ACTIVE = \"active\";\n        if (active) {\n          $root.classList.add(ACTIVE);\n        } else {\n          $root.classList.remove(ACTIVE);\n        }\n      },\n      enumerable: true\n    },\n    message: {\n      set: function(message){\n        $message.innerHTML = message;\n      }\n    }\n  });\n}\n","/* jshint esnext: true */\n\nimport Controller from \"./controller\";\nimport Display from \"./display\";\n\nexport default function Notice($root, app){\n  var display = Display($root);\n  var controller = Controller($root, app);\n\n  function update(){\n    var message = app.notices[0];\n    if (message) {\n      display.message = message;\n      display.active = true;\n    } else {\n      display.active = false;\n    }\n  }\n\n  app.onBadReading(update);\n  app.onCloseNotices(update);\n  app.onShowAlert(update);\n  return {\n    update: update\n  };\n}\n","/* jshint esnext: true */\n\nimport * as Client from \"./client\";\nimport * as Logger from \"./framework/logger\";\nimport { argsToArray } from \"./utils/utils\";\n\nvar client = Client.start({\n  console: Logger.wrap(Logger.development, {prefix: \"LOB\"})\n});\n\nimport { ready } from \"./utils/dom\";\n\nimport Avionics from \"./avionics/avionics\";\nimport Notices from \"./notices/notices\";\n\nready(function(){\n  var $avionics = document.querySelector(\"[data-interface~=avionics]\");\n  window.avionics = Avionics($avionics, client);\n\n  var $notices = document.querySelector(\"[data-component~=notices]\");\n  window.notices = Notices($notices, client);\n});\n\nexport default client;\n"],"names":["create","start","Dispatcher.create","GeneralStore.enhance","Event.start","Logger.wrap","Uplink","Presenter","Controller","Display","Client.start","Logger.development","Avionics","Notices"],"mappings":"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"}