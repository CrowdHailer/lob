{"version":3,"file":"lob.js","sources":["..//home/peter/Workshop14/lob/client/utils/logger.js","..//home/peter/Workshop14/lob/client/app.js","..//home/peter/Workshop14/lob/client/utils/dom.js","..//home/peter/Workshop14/lob/client/client.js"],"sourcesContent":["/* jshint esnext: true */\n\n\nexport function create (prefix){\n  prefix = \"[\" + prefix + \"]\";\n  var notices = [prefix];\n  return {\n    info: function(..._){\n      var args = Array.prototype.slice.call(arguments);\n      console.info.apply(console, notices.concat(args));\n    },\n    warn: function(..._){\n      var args = Array.prototype.slice.call(arguments);\n      console.warn.apply(console, notices.concat(args));\n    },\n    // error: function(..._){\n    //   var args = Array.prototype.slice.call(arguments);\n    //   console.error.apply(console, notices.concat(args));\n    // }\n    error: function(e){ throw e; }\n  };\n}\n\nexport function Development(options, logger){\n  var prefix;\n  var notices = [];\n  if (options.prefix){\n    prefix = \"[\" + options.prefix + \"]\";\n    notices = notices.concat(prefix);\n  }\n  var argsToArray = function(args){\n    return Array.prototype.slice.call(args);\n  };\n  function debug(){\n    logger.debug.apply(logger, notices.concat(argsToArray(arguments)));\n  }\n  function info(){\n    logger.info.apply(logger, notices.concat(argsToArray(arguments)));\n  }\n  function warn(a){\n    var args = argsToArray(arguments);\n    logger.warn.apply(logger, notices.concat(args));\n  }\n  function error(e){\n    throw e;\n  }\n  return {\n    debug: debug,\n    info: info,\n    warn: warn,\n    error: error,\n  };\n}\n\nexport var DEFAULT = {\n  info: function(){  },\n  warn: function(){  },\n  // error logging should be used for errors and in development these should be thrown\n  error: function(e){ throw e; }\n};\n\nexport var NullLogger = {\n  info: function(a){  },\n  warn: function(a){  },\n  error: function(a){  },\n};\n","/* jshint esnext: true */\n// import Store from \"./store\";\n\nimport { DEFAULT } from \"./utils/logger\";\n\nexport default function App(actions, logger){\n  if (logger == void 0){ logger = DEFAULT; }\n  var services = {};\n  var components = {};\n  // var store = Store();\n  // actions.newReading.register(store.newReading);\n  // actions.startStreaming.register(store.startStreaming);\n\n  return {\n    registerService: function(name, factory){\n      if (services[name]) {\n        logger.error(new TypeError(\"Service name already registered: \" + name));\n        return;\n      }\n\n      services[name] = {\n        factory: factory\n      };\n    },\n    fetchService: function(name){\n      var service = services[name];\n      if (!service){\n        logger.error(new TypeError(\"Service not found: \" + name));\n        return;\n      }\n\n      if (service.instance) { return service.instance; }\n\n      service.instance = service.factory(this);\n      return service.instance;\n    },\n    registerComponent: function(name, factory){\n      components[name] ={factory: factory};\n    },\n    // name optional get from element data attribute\n    startComponent: function(element, name){\n      var component = components[name];\n      return component.factory(element, this);\n    },\n    actions: actions,\n    logger: logger\n    // store: store\n  };\n}\n","/* jshint esnext: true */\n\nexport function ready(fn) {\n  if (document.readyState !== \"loading\"){\n    fn();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", fn);\n  }\n}\n","/* jshint esnext: true */\nconsole.log(\"starting Client\");\n\nimport App from \"./app\";\nimport { Development } from \"./utils/logger\";\n\nvar MyApp = App({}, Development({prefix: \"Lob\"}, window.console));\nMyApp.registerService(\"accelerometer\", function(app){\n  return {\n    start: function(){\n      app.logger.warn(\"accelerometer\");\n    }\n  };\n});\n\nMyApp.registerService(\"uplink\", function(app){\n  return {\n    startTransmission: function(){\n      app.logger.debug(\"Started Transmission\");\n    }\n  };\n});\n\nMyApp.registerComponent(\"avionics\", function(element, enviroment){\n  // could pass on reading / on error into start\n  enviroment.fetchService(\"accelerometer\").start();\n  enviroment.fetchService(\"uplink\").startTransmission();\n  console.log(\"mounting avionics component\");\n});\n\nimport { ready } from \"./utils/dom\";\n\nready(function(){\n  var $avionics = document.querySelector(\"[data-interface]\");\n  var avionics = MyApp.startComponent($avionics, \"avionics\");\n});\n"],"names":[],"mappings":"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"}